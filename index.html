<!DOCTYPE html>
<html lang="pt-MZ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notícias CLD | Início</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #ffffff; --surface: #ffffff; --text: #202124; --text-sec: #5f6368;
            --border: #dadce0; --blue: #1a73e8; --skeleton: #eeeeee;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #121212; --surface: #1e1e1e; --text: #e8eaed; --text-sec: #9aa0a6;
                --border: #3c4043; --skeleton: #333333;
            }
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Google Sans', sans-serif; background: var(--bg); color: var(--text); transition: 0.3s; }

        /* Header */
        .header { position: sticky; top: 0; background: var(--surface); z-index: 1000; border-bottom: 1px solid var(--border); padding: 12px 20px; }
        .nav-container { max-width: 1000px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; }
        .logo { font-size: 22px; font-weight: 700; color: var(--text); text-decoration: none; }
        .logo span { color: var(--blue); }

        /* Feed */
        .feed { max-width: 1000px; margin: 0 auto; padding: 20px; display: grid; gap: 24px; }
        
        /* Cards */
        .hero-card { display: block; text-decoration: none; color: inherit; border-radius: 16px; overflow: hidden; border: 1px solid var(--border); }
        .hero-card img { width: 100%; height: 250px; object-fit: cover; background: var(--skeleton); border-bottom: 1px solid var(--border); }
        .list-card { display: flex; gap: 16px; text-decoration: none; color: inherit; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
        .list-text { flex: 1; }
        .list-card img { width: 100px; height: 100px; border-radius: 12px; object-fit: cover; background: var(--skeleton); }

        .meta { font-size: 12px; color: var(--text-sec); margin-bottom: 6px; font-weight: 500; }
        .meta b { color: var(--blue); }
        h2 { font-size: 22px; line-height: 1.3; margin-top: 8px; }
        h3 { font-size: 16px; line-height: 1.4; font-weight: 500; }

        /* Skeleton Animation */
        .skeleton { background: var(--skeleton); animation: pulse 1.5s infinite; border-radius: 4px; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body>

<header class="header">
    <div class="nav-container">
        <a href="index.html" class="logo">Notícias <span>CLD</span></a>
        <i class="fas fa-search"></i>
    </div>
</header>

<main class="feed" id="newsFeed">
    <div class="hero-card">
        <div style="height:250px" class="skeleton"></div>
        <div style="padding:20px"><div class="skeleton" style="height:20px; width:30%"></div><div class="skeleton" style="height:30px; margin-top:10px"></div></div>
    </div>
</main>

<script>
    const SOURCES = [
        { name: "O País", slug: "opais", api: "https://opais.co.mz/wp-json/wp/v2/posts?_embed&per_page=10" },
        { name: "Carta MZ", slug: "carta", api: "https://cartamz.com/wp-json/wp/v2/posts?_embed&per_page=10" }
    ];

    async function loadNews() {
        let allPosts = [];
        for (const s of SOURCES) {
            try {
                const r = await fetch(s.api);
                const data = await r.json();
                data.forEach(p => allPosts.push({
                    id: p.id, title: p.title.rendered, src: s.name, slug: s.slug,
                    img: p._embedded?.['wp:featuredmedia']?.[0]?.source_url || '',
                    date: new Date(p.date)
                }));
            } catch(e) {}
        }
        allPosts.sort((a,b) => b.date - a.date);
        render(allPosts);
    }

    function render(posts) {
        const feed = document.getElementById('newsFeed');
        feed.innerHTML = '';
        posts.forEach((p, i) => {
            const dateStr = p.date.toLocaleDateString('pt-MZ', { day:'numeric', month:'short' });
            if(i === 0) {
                feed.innerHTML += `
                    <a href="artigo.html?id=${p.id}&src=${p.slug}" class="hero-card">
                        <img src="${p.img}" onerror="this.src='https://via.placeholder.com/400x200?text=CLD'">
                        <div style="padding:20px"><div class="meta"><b>${p.src}</b> • ${dateStr}</div><h2>${p.title}</h2></div>
                    </a>`;
            } else {
                feed.innerHTML += `
                    <a href="artigo.html?id=${p.id}&src=${p.slug}" class="list-card">
                        <div class="list-text"><div class="meta"><b>${p.src}</b> • ${dateStr}</div><h3>${p.title}</h3></div>
                        <img src="${p.img}" onerror="this.src='https://via.placeholder.com/100?text=CLD'">
                    </a>`;
            }
        });
    }
    window.onload = loadNews;
</script>
</body>
</html>
