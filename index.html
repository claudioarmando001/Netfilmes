<!DOCTYPE html>
<html lang="pt-MZ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notícias CLD</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a73e8; --bg: #ffffff; --surface: #f8f9fa;
            --text: #202124; --text-sec: #5f6368; --border: #dadce0;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Google Sans', sans-serif; background: #fff; color: var(--text); }

        /* Header */
        .header { position: sticky; top: 0; background: #fff; z-index: 1000; padding: 12px 16px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border); }
        .logo { display: flex; align-items: center; gap: 10px; font-size: 20px; font-weight: 700; text-decoration: none; color: var(--text); }
        .logo i { background: var(--primary); color: white; padding: 8px; border-radius: 8px; font-size: 16px; }

        /* Categorias Ampliadas */
        .category-bar { display: flex; gap: 8px; overflow-x: auto; padding: 12px 16px; scrollbar-width: none; border-bottom: 1px solid var(--border); }
        .cat-item { display: flex; align-items: center; gap: 6px; padding: 8px 16px; background: #fff; border: 1px solid var(--border); border-radius: 20px; font-size: 14px; font-weight: 500; white-space: nowrap; cursor: pointer; color: var(--text-sec); }
        .cat-item.active { background: #e8f0fe; color: var(--primary); border-color: var(--primary); }

        /* Pesquisa */
        .search-area { padding: 16px; }
        .search-box { background: var(--surface); border-radius: 28px; padding: 12px 20px; display: flex; align-items: center; gap: 10px; border: 1px solid var(--border); }
        .search-box input { border: none; background: transparent; width: 100%; outline: none; font-size: 16px; }

        /* Notícia Estilo Card Imagem */
        .feed { max-width: 600px; margin: 0 auto; padding: 16px; }
        .news-card { background: white; border: 1px solid var(--border); border-radius: 16px; overflow: hidden; margin-bottom: 24px; text-decoration: none; color: inherit; display: block; position: relative; }
        .img-container { position: relative; }
        .news-card img { width: 100%; height: 220px; object-fit: cover; }
        .tag-overlay { position: absolute; top: 12px; left: 12px; background: white; padding: 4px 12px; border-radius: 20px; font-size: 11px; font-weight: 700; text-transform: uppercase; }
        .bookmark-btn { position: absolute; top: 12px; right: 12px; background: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--text-sec); }
        
        .card-body { padding: 16px; }
        .card-body h2 { font-size: 20px; margin-bottom: 8px; line-height: 1.3; }
        .card-body p { font-size: 14px; color: var(--text-sec); display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; margin-bottom: 12px; }
        
        .card-footer { display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--text-sec); }
        .source-icon { width: 20px; height: 20px; background: #fbbc05; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 800; font-size: 10px; }

        /* FAB Buttons */
        .fab-container { position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 12px; }
        .fab { width: 50px; height: 50px; border-radius: 50%; border: none; color: white; font-size: 18px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
    </style>
</head>
<body>

<header class="header">
    <a href="#" class="logo"><i class="fas fa-newspaper"></i> Notícias <b>CLD</b></a>
    <i class="fas fa-redo-alt" style="color: var(--text-sec)" onclick="location.reload()"></i>
</header>

<div class="category-bar">
    <div class="cat-item active"><i class="fas fa-globe"></i> Todas</div>
    <div class="cat-item"><i class="fas fa-landmark"></i> Política</div>
    <div class="cat-item"><i class="fas fa-chart-line"></i> Economia</div>
    <div class="cat-item"><i class="fas fa-futbol"></i> Desporto</div>
    <div class="cat-item"><i class="fas fa-flask"></i> Tecnologia</div>
    <div class="cat-item"><i class="fas fa-heartbeat"></i> Saúde</div>
</div>

<div class="search-area">
    <div class="search-box">
        <i class="fas fa-search" style="color:var(--text-sec)"></i>
        <input type="text" placeholder="Pesquisar notícias...">
    </div>
</div>

<main class="feed" id="mainFeed"></main>

<div class="fab-container">
    <button class="fab" style="background: var(--primary)"><i class="fas fa-arrow-up"></i></button>
    <button class="fab" style="background: #34a853;"><i class="fas fa-envelope"></i></button>
</div>

<script>
    const SOURCES = [
        { name: "Integrity", api: "https://cartamz.com/wp-json/wp/v2/posts?_embed&per_page=10" },
        { name: "O País", api: "https://opais.co.mz/wp-json/wp/v2/posts?_embed&per_page=10" }
    ];

    async function loadNews() {
        let all = [];
        for (const s of SOURCES) {
            try {
                const r = await fetch(s.api);
                const data = await r.json();
                data.forEach(p => all.push({
                    id: p.id, 
                    title: p.title.rendered, 
                    excerpt: p.excerpt.rendered.replace(/<[^>]*>?/gm, ''),
                    src: s.name,
                    slug: s.name === "O País" ? "opais" : "carta",
                    img: p._embedded?.['wp:featuredmedia']?.[0]?.source_url || '',
                    date: new Date(p.date)
                }));
            } catch(e){}
        }
        all.sort((a,b) => b.date - a.date);
        render(all);
    }

    function render(posts) {
        document.getElementById('mainFeed').innerHTML = posts.map(p => `
            <a href="artigo.html?id=${p.id}&src=${p.slug}" class="news-card">
                <div class="img-container">
                    <img src="${p.img}">
                    <div class="tag-overlay">POLÍTICA</div>
                    <div class="bookmark-btn"><i class="fas fa-bookmark"></i></div>
                </div>
                <div class="card-body">
                    <h2>${p.title}</h2>
                    <p>${p.excerpt}</p>
                    <div class="card-footer">
                        <div class="source-icon">${p.src[0]}</div>
                        <span>${p.src}</span>
                        <span style="margin-left:auto"><i class="far fa-clock"></i> ${p.date.toLocaleDateString()}</span>
                    </div>
                </div>
            </a>
        `).join('');
    }
    window.onload = loadNews;
</script>
</body>
</html>
